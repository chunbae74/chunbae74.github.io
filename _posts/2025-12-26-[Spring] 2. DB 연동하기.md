---
title: "[Spring] 2. DB 연동하기"
author: chunbae
date: 2025-12-26 00:02:00 +0900
categories: [Spring, Coding_apple]
tags: [spring, db, sql, azure, dbeaver, jpa, orm]
render_with_liquid: falses
---

## 1. 데이터베이스 종류

> ### 관계형 데이터베이스

일반적인 표(Table)이라 생각하면 쉽다. SQL이라는 표준 언어를 사용한다.<br><br>
**특징**<br>
- 데이터 구조(컬럼 타입)가 미리 정해져 있어야 함<br>
- 데이터의 무결성(정확성)을 최우선으로 함<br>
- 정규화를 통해 데이터 중복을 최소화 함<br>

<br>

대표적인 종류로는 **MySQL, PostreSQL, Oracle**이 있다.

<br><br>

> ### 비관계형 데이터베이스 (NoSQL)

표 형식이 아니라 문서(Document), 키-값(Key-Value), 그래프 등 다양한 형태로 데이터를 저장한다.<br><br>
**특징**<br>
- 데이터 구조를 미리 정하지 않고 자유롭게 넣을 수 있음<br>
- 서버를 여러 대 늘려 대용량 데이터를 처리하기에 유리함<br>
- 단순한 조회화 쓰기 작업이 매우 빠름<br>

<br>

대표적인 종류로는 **MongoDB, Redis, Cassandra**이 있다.

<br><br>

## 2. database와 table

![Desktop View](/assets/img/[Spring]2.DB연동하기/img10.png){: width="636" height="631" }_사진 출처 : 코딩애플_

데이터베이스는 **폴더**,<br>테이블은 폴더 안에 들어있는 각 **파일**이라고 생각하시면 된다.

<br><br>

## 3. 데이터베이스 호스팅

[Azure](portal.azure.com)에 들어가 가입 후 카드 등록까지 한다.<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img01.png){: width="1600" height="434" }

**Azure Database for MySQL 유동 서버** 메뉴를 선택한다.

<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img02.png){: width="1581" height="423" }

**만들기 - 유연한 서버 - 고급 만들기**를 선택한다.

<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img03.png){: width="1093" height="1269" }
![Desktop View](/assets/img/[Spring]2.DB연동하기/img04.png){: width="1091" height="727" }

필수 기입 정보들을 채워준다.<br>관리자 로그인과 암호는 DB연결 시 필요하니 잊어먹지 말기!

<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img05.png){: width="1085" height="935" }

**컴퓨팅+스토리지** 항목에서는 **서버 구성** 을 누른뒤에<br>스토리지-IOPS를 **미리 프로비전된 IOPS**로, 스토리지 자동 증가는 [ ]로 설정한다.

<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img06.png){: width="1089" height="1065" }

**네트워킹**탭으로 넘어감!<br>접근 가능한 IP주소를 등록하는 것인데<br>집에서 접속중인 것이라면 파란색 박스를,<br>스타벅스와 같이 공공장송에서 접속중인 것이라면 빨간색 버튼을 눌러 추가해 준다.<br><br>나머지 설정들은 그냥 슉슉 넘기신 다음 만들기를 누르면 된다.
<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img07.png){: width="1702" height="928" }

서버 생성이 완료되었으면 **설정 - 서버 매개 변수** 에서 **require_secure_transport** 항목을 OFF로 설정한다.<br>SSL 인증 여부인데, 실제 배포 시에는 ON으로 해야하지만 지금은 연습하는거니까 꺼도 괜찮다.

<br><br>

## 3. DB 접속

[DBeaver](https://dbeaver.io/) 프로그램을 이용해 DB에 접속할 것이다.

![Desktop View](/assets/img/[Spring]2.DB연동하기/img08.png){: width="1153" height="647" }

**데이터베이스 - 새 데이터베이스 연결 - MySQL** 차례로 선택한다.

<br> 

--- 

<br>

![Desktop View](/assets/img/[Spring]2.DB연동하기/img09.png){: width="1385" height="859" }

Azure 서버의 **개요** 창을 띄워두고 정보들을 입력해 나간다.<br><br>
**Server Host**에는 엔드포인트 내용을 복붙<br>
**Port**는 건들지 않았으면 3306이 기본값<br>
**Username**는 서버 생성 시 입력했던 관리자 로그인을,<br>
**Password**는 비밀번호를 입력<br>

한 뒤에 연결을 시도하면 된다.

<br><br>

## 3. 데이터베이스 생성

DBeaver 연 다음, 상단 **SQL 편집기 - SQL 편집기**를 누른 다음 아래 코드 입력한다.

```
CREATE DATABASE 데이터베이스명;
```

<br><br>

## 4. JPA을 사용하기 위한 환경 세팅

> ### JPA란?

JPA는 자바 객체와 데이터베이스 테이블 사이의 **번역기**라고 생각하면 된다.<br>
JPA를 통해 개발자는 직접 복잡한 `INSERT`, `UPDATE`와 같은 SQL 명령어를 작성하는 대신,<br>
자바 컬렉션에 데이터를 넣고 빼듯이 메소드를 호출하면 JPA가 대신 SQL을 만들어 실행해 준다.

<br><br>

> ### ORM(Object-Relation- Mapping)이란?

ORM은 자바 객체와 DB 테이블을 자동으로 매핑해주는 기술이다.<br>JPA는 이 ORM기술을 자바에서 어떻게 사용할지 정의한 **약속(interface)**이다.

<br><br>

> ###  라이브러리 추가

JPA를 사용하기 위해선 **build.gradle** 파일에 다음 라이브러리들을 추가해 주어야 한다.

```js
dependencies {
    runtimeOnly 'com.mysql:mysql-connector-j'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
}
```

<br>

또한 MySQL에 접속하기 위해선 **application.properties** 파일에 다음 내용을 추가해야 한다.

```js
spring.datasource.url=jdbc:mysql://호스팅받은곳엔드포인트주소/만든database이름
spring.datasource.username=DB접속아이디
spring.datasource.password=DB접속비번
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

// DB 입출력시 SQL을 따로 실행창에 출력할지 여부
spring.jpa.properties.hibernate.show_sql=true
// 코드를 통해 테이블 생성,수정 시 그걸 자동으로 DB에 반영할 지 여부
// none이 실제 서비스 운영할 땐 안정적이나, update도 괜찮다.
spring.jpa.hibernate.ddl-auto=update 
```

추가 후, 서버 실행 시 에러가 별다른 에러가 안 뜨면 DB연동에 성공한 것이다.

<br><br>

## 출처
- [코딩애플 쉽게 배우는 Spring Boot & JPA](https://codingapple.com/course-status/)